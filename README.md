# ðŸ¤– AI Agent for Car Sales

## ðŸ“± Ejemplos de ConversaciÃ³n

### PrevisualizaciÃ³n de la ConversaciÃ³n
AquÃ­ puedes ver ejemplos visuales de cÃ³mo se ve la conversaciÃ³n en WhatsApp:

<img src="docs/images/IMG_9031.PNG" width="300px" />
<img src="docs/images/IMG_9032.PNG" width="300px" />
<img src="docs/images/IMG_9033.PNG" width="300px" />
<img src="docs/images/IMG_9034.PNG" width="300px" />
<img src="docs/images/IMG_9035.PNG" width="300px" />

### 1. BÃºsqueda Inicial
```
[Usuario] Hola ðŸ‘‹
[Bot] Â¡Hola! Soy tu asistente para encontrar el auto ideal en Kavak ðŸš—
Â¿QuÃ© tipo de auto estÃ¡s buscando?

[Usuario] Busco un auto econÃ³mico familiar
[Bot] Entiendo que buscas un auto econÃ³mico y familiar. Te sugiero estas opciones:

ðŸš— Chevrolet Spark ACTIV D 2021
ðŸ’° $325,000
ðŸ“ 5 puertas
ðŸŽµ Bluetooth y CarPlay
â›½ EconÃ³mico en consumo

ðŸš— Volkswagen Vento 2020
ðŸ’° $350,000
ðŸ“ 4 puertas
ðŸŽµ Bluetooth y CarPlay
ðŸ›‹ï¸ Espacioso

Â¿Te gustarÃ­a saber mÃ¡s detalles de alguno de estos autos?
```

### 2. Consulta de CaracterÃ­sticas
```
[Usuario] Â¿Tiene bluetooth el Spark?
[Bot] Â¡SÃ­! El Chevrolet Spark ACTIV D incluye:
ðŸŽµ Bluetooth
ðŸ“± CarPlay
ðŸŽ§ Entrada auxiliar
ðŸ”Š 6 bocinas

Â¿Te gustarÃ­a agendar una cita para conocerlo en persona? 
TambiÃ©n puedo mostrarte mÃ¡s opciones si lo prefieres.

[Usuario] MuÃ©strame mÃ¡s opciones
[Bot] AquÃ­ tienes mÃ¡s opciones econÃ³micas y familiares:

ðŸš— Nissan Versa 2021
ðŸ’° $340,000
ðŸ“ 4 puertas
ðŸŽµ Bluetooth y CarPlay
ðŸ›‹ï¸ Amplio espacio interior

ðŸš— Kia Rio 2020
ðŸ’° $360,000
ðŸ“ 4 puertas
ðŸŽµ Bluetooth y CarPlay
ðŸ”‹ Bajo consumo de combustible

Â¿Alguna de estas opciones te interesa? Puedo darte mÃ¡s detalles o ayudarte a calcular el financiamiento.
```

### 3. Financiamiento
```
[Usuario] Â¿CuÃ¡nto serÃ­a la mensualidad del Versa?
[Bot] Para el Nissan Versa 2021 ($340,000), te muestro las opciones de financiamiento:

ðŸ“Š OpciÃ³n 1:
ðŸ’° Enganche: $68,000 (20%)
ðŸ“… Plazo: 48 meses
ðŸ’µ Mensualidad: $7,850
ðŸ“ˆ Tasa: 10.9% anual

ðŸ“Š OpciÃ³n 2:
ðŸ’° Enganche: $102,000 (30%)
ðŸ“… Plazo: 36 meses
ðŸ’µ Mensualidad: $8,200
ðŸ“ˆ Tasa: 10.5% anual

Â¿Te gustarÃ­a agendar una cita para revisar el auto y formalizar el financiamiento?
```

### 4. Agendamiento de Cita
```
[Usuario] SÃ­, me interesa
[Bot] Perfecto, para agendar tu cita necesito algunos datos:

1ï¸âƒ£ Â¿QuÃ© dÃ­a te gustarÃ­a visitarnos? (L-V 9:00-18:00, S 9:00-14:00)
2ï¸âƒ£ Â¿A quÃ© hora te acomoda?
3ï¸âƒ£ Â¿CuÃ¡l es tu nombre completo?

[Usuario] MaÃ±ana a las 11
[Bot] Para agendar tu cita necesito tu nombre completo para registrarte en el sistema.

[Usuario] Juan PÃ©rez
[Bot] Â¡Perfecto! Tu cita ha sido agendada:

ðŸ“… Fecha: [Fecha de maÃ±ana]
â° Hora: 11:00
ðŸš— Auto: Nissan Versa 2021
ðŸ‘¤ Nombre: Juan PÃ©rez

Te enviarÃ© un recordatorio por WhatsApp. Â¿Hay algo mÃ¡s en lo que pueda ayudarte?
```

### 5. FinalizaciÃ³n y MSAT
```
[Usuario] No, gracias
[Bot] Â¡Gracias por tu interÃ©s! 

Â¿PodrÃ­as calificar tu experiencia con nuestro asistente del 1 al 5, donde:
1 = Muy insatisfecho
2 = Insatisfecho
3 = Neutral
4 = Satisfecho
5 = Muy satisfecho

Responde solo con el nÃºmero de tu calificaciÃ³n.

[Usuario] 5
[Bot] Â¡Gracias por tu excelente calificaciÃ³n! ðŸ™ 
Nos alegra que hayas tenido una gran experiencia con nuestro asistente.
```

## ðŸ“± Asistente de IA para Venta de Autos

Asistente de IA para ayudar a los clientes a encontrar su auto ideal en el catÃ¡logo de Autos.

## Prueba de la AplicaciÃ³n

### 1. Configurar WhatsApp Sandbox
1. Abrir WhatsApp en tu telÃ©fono
2. Agregar el nÃºmero: +14155238886
3. Enviar mensaje: `join look-quietly`
4. Esperar confirmaciÃ³n de que te has unido al sandbox

Alternativamente, puedes:
- Hacer clic en [este enlace](http://wa.me/+14155238886?text=join%20look-quietly) para abrir WhatsApp directamente
- Escanear el cÃ³digo QR (si estÃ¡ disponible)
- Enviar mensaje: `join look-quietly`

### 2. Probar la AplicaciÃ³n
Una vez unido al sandbox, puedes probar los siguientes comandos:

#### BÃºsqueda de Autos
```
Hola, busco un auto econÃ³mico familiar
```
```
MuÃ©strame Volkswagens Golf
```
```
Autos entre 300 y 400 mil pesos
```
```
Autos con bluetooth y carplay
```

#### Financiamiento
```
Calcula el financiamiento para un auto de 500 mil pesos con enganche de 100 mil
```
```
MuÃ©strame opciones a 48 meses
```

#### Detalles
```
Dame mÃ¡s detalles del Volkswagen Golf GTI Performance
```
```
MuÃ©strame mÃ¡s Chevrolets Spark ACTIV D
```

### 3. Verificar Funcionamiento
1. **Respuestas del Bot**:
   - DeberÃ­as recibir respuestas en segundos
   - Las respuestas deben ser relevantes a tu bÃºsqueda
   - El bot debe mantener el contexto de la conversaciÃ³n

2. **Monitoreo**:
   - Revisar CloudWatch Logs para ver el flujo de la conversaciÃ³n
   - Verificar Step Functions para ver el procesamiento
   - Monitorear DynamoDB para ver las consultas

3. **SoluciÃ³n de Problemas**:
   - Si no recibes respuesta, verificar:
     - Que estÃ¡s en el sandbox correcto
     - Que el webhook estÃ¡ configurado
     - Que las funciones Lambda estÃ¡n activas
   - Si la respuesta es incorrecta:
     - Verificar logs de la funciÃ³n de chat
     - Revisar embeddings en DynamoDB
     - Comprobar el catÃ¡logo de autos

### 4. Notas Importantes
- El sandbox de WhatsApp tiene lÃ­mites de uso
- Las respuestas pueden tardar unos segundos
- El bot mantiene contexto por 24 horas
- Los embeddings se actualizan diariamente
- Las bÃºsquedas son semÃ¡nticas, puedes usar lenguaje natural

## CaracterÃ­sticas

### BÃºsqueda SemÃ¡ntica de Autos
- BÃºsqueda por descripciÃ³n natural (ej: "un auto econÃ³mico familiar")
- BÃºsqueda por marca y modelo especÃ­ficos
- BÃºsqueda por rango de precio y aÃ±o
- BÃºsqueda por caracterÃ­sticas especÃ­ficas (bluetooth, carplay)
- Resultados ordenados por relevancia

### CaracterÃ­sticas Disponibles
- Marca, modelo, versiÃ³n y aÃ±o
- Precio y kilometraje
- Dimensiones (largo, ancho, altura)
- CaracterÃ­sticas (bluetooth, carplay)

### Financiamiento
- CÃ¡lculo de opciones de financiamiento
- Diferentes plazos (36 a 72 meses)
- Tasa de interÃ©s personalizable
- CÃ¡lculo de mensualidades

### ConversaciÃ³n Natural
- Mantiene contexto de la conversaciÃ³n
- Resumen automÃ¡tico de preferencias
- Respuestas personalizadas
- Manejo de mÃºltiples criterios de bÃºsqueda

## Arquitectura

### Diagrama General
```mermaid
graph TB
    subgraph Cliente
        WA[WhatsApp] -->|Mensaje| TW[Twilio]
    end

    subgraph AWS
        subgraph API Gateway
            TW -->|Webhook| APIG[API Gateway]
        end

        subgraph Step Functions
            APIG -->|Inicia| SF1[Flujo de ConversaciÃ³n]
            SF1 -->|Procesa| L1[Lambda Chat process_message]
            SF1 -->|Responde| L3[Lambda Webhook send_response]
            SF1 -->|Guarda Prospecto| L4[Lambda Save Prospecto process_message]
            SF1 -->|MSAT| L5[Lambda MSAT process_message]
            CW[CloudWatch Events] -->|Trigger Diario| SF2[Flujo de Embeddings]
            SF2 -->|Actualiza| L2[Lambda Embeddings update_embeddings]
        end

        subgraph DynamoDB
            L1 -->|Lee/Escribe| DB1[Conversaciones]
            L1 -->|Consulta| DB2[Embeddings]
            L2 -->|Lee/Escribe| DB2[Embeddings]
            L2 -->|Lee| DB3[CatÃ¡logo]
            L4 -->|Guarda| DB4[Prospectos]
            L5 -->|Guarda| DB5[MSAT]
        end

        subgraph OpenAI
            L1 -->|Consulta| GPT[GPT-3.5 Turbo]
            L2 -->|Genera| EMB[Embeddings API]
        end
    end

    L3 -->|Respuesta| WA
```

### Flujos Detallados

#### 1. Flujo de ConversaciÃ³n
```mermaid
stateDiagram-v2
    [*] --> RecibirMensaje
    RecibirMensaje --> ProcesarMensaje
    ProcesarMensaje --> VerificarContexto

    VerificarContexto --> GenerarRespuesta

    GenerarRespuesta --> GuardarProspecto: Â¿Es agendamiento?
    GuardarProspecto --> EnviarRespuesta
    GenerarRespuesta --> EnviarRespuesta: Otro caso
    EnviarRespuesta --> SolicitarMSAT: Â¿Finaliza conversaciÃ³n?
    SolicitarMSAT --> ProcesarMSAT: Usuario responde MSAT
    ProcesarMSAT --> ActualizarContexto
    EnviarRespuesta --> ActualizarContexto: Si no es MSAT
    ActualizarContexto --> [*]

    state VerificarContexto {
        [*] --> ConsultarDynamoDB
        ConsultarDynamoDB --> VerificarTimestamp
        VerificarTimestamp --> [*]
    }

    state GenerarRespuesta {
        [*] --> ConsultarGPT
        ConsultarGPT --> FormatearRespuesta
        FormatearRespuesta --> [*]
    }
```

#### 2. Flujo de ActualizaciÃ³n de Embeddings (Trigger Diario)
```mermaid
stateDiagram-v2
    [*] --> TriggerDiario
    TriggerDiario --> ObtenerCatalogo

    state ProcesarLote {
        [*] --> ObtenerLote
        ObtenerLote --> GenerarEmbedding
        GenerarEmbedding --> GuardarDynamoDB
        GuardarDynamoDB --> [*]
    }

    ObtenerCatalogo --> ProcesarLote
    ProcesarLote --> VerificarMasLotes

    VerificarMasLotes --> ProcesarLote: Hay mÃ¡s lotes
    VerificarMasLotes --> Finalizar: No hay mÃ¡s lotes
    Finalizar --> [*]

    state GenerarEmbedding {
        [*] --> NormalizarTexto
        NormalizarTexto --> ConsultarOpenAI
        ConsultarOpenAI --> [*]
    }
```

### Componentes y Responsabilidades

#### 1. Frontend (WhatsApp + Twilio)
- **WhatsApp**: Interfaz de usuario
- **Twilio**: 
  - Recibe mensajes de WhatsApp
  - EnvÃ­a mensajes al webhook
  - Maneja la sesiÃ³n de WhatsApp

#### 2. API Gateway
- Expone endpoints para:
  - Webhook de Twilio
  - ActualizaciÃ³n de embeddings
  - Monitoreo y salud

#### 3. Step Functions
- **Flujo de ConversaciÃ³n**:
  - Orquesta el procesamiento de mensajes
  - Maneja actualizaciones de embeddings
  - Gestiona el contexto de la conversaciÃ³n
  - Coordina la generaciÃ³n de respuestas

- **Flujo de Embeddings**:
  - Se ejecuta diariamente
  - Procesa el catÃ¡logo en lotes
  - Actualiza embeddings desactualizados
  - Maneja errores y reintentos

#### 4. Lambda Functions
- **Chat**:
  - Procesa mensajes del usuario
  - Consulta GPT-3.5
  - Maneja el contexto de la conversaciÃ³n
  - Genera respuestas personalizadas

- **Embeddings**:
  - Genera embeddings para autos
  - Actualiza embeddings existentes
  - Maneja la normalizaciÃ³n de texto
  - Gestiona la cachÃ© de embeddings

- **Webhook**:
  - Recibe webhooks de Twilio
  - Valida mensajes entrantes
  - EnvÃ­a respuestas a WhatsApp
  - Maneja errores de comunicaciÃ³n

#### 5. Bases de Datos
- **Conversaciones**:
  - Almacena historial de chat
  - Mantiene contexto de conversaciÃ³n
  - Guarda resÃºmenes de preferencias

- **Embeddings**:
  - Almacena embeddings de autos
  - Mantiene metadatos de actualizaciÃ³n
  - Optimiza bÃºsquedas semÃ¡nticas

- **CatÃ¡logo**:
  - Almacena informaciÃ³n de autos
  - Mantiene caracterÃ­sticas y precios
  - ActualizaciÃ³n periÃ³dica

#### 6. Servicios Externos
- **OpenAI**:
  - GPT-3.5 Turbo para conversaciÃ³n
  - Embeddings API para bÃºsqueda semÃ¡ntica
  - OptimizaciÃ³n de prompts

## Desarrollo

### Requisitos
- Python 3.9+
- AWS SAM CLI
- Docker (para desarrollo local)
- OpenAI API Key
- Cuenta de AWS con permisos adecuados
- Cuenta de Twilio (para WhatsApp)

### Variables de Entorno
```bash
# OpenAI
OPENAI_API_KEY=sk-...

# AWS
AWS_ACCESS_KEY_ID=AKIA...
AWS_SECRET_ACCESS_KEY=...
AWS_REGION=us-east-1

# DynamoDB
CATALOG_TABLE=ai-agentcatalog-{stage}
EMBEDDINGS_TABLE=ai-agentembeddings-{stage}
STAGE=dev|prod

# Twilio
TWILIO_ACCOUNT_SID=AC...
TWILIO_AUTH_TOKEN=...
TWILIO_PHONE_NUMBER=whatsapp:+14155238886  # NÃºmero de WhatsApp de Twilio
```

### Tutorial de ConfiguraciÃ³n

#### 1. Configurar AWS
1. Crear una cuenta en AWS si no tienes una
2. Crear un usuario IAM con los siguientes permisos:
   - AWSLambdaFullAccess
   - AmazonDynamoDBFullAccess
   - AmazonAPIGatewayAdministrator
   - CloudWatchFullAccess
   - AWSXRayFullAccess
   - AWSStepFunctionsFullAccess
3. Generar credenciales de acceso (Access Key y Secret Key)
4. Configurar AWS CLI:
```bash
aws configure
# Ingresar Access Key, Secret Key y regiÃ³n (ej: us-east-1)
```

#### 2. Configurar Twilio
1. Crear una cuenta en Twilio (https://www.twilio.com)
2. Obtener Account SID y Auth Token del dashboard
3. Configurar WhatsApp Sandbox:
   - Ir a Twilio Console > Messaging > Try it out > Send a WhatsApp message
   - Seguir las instrucciones para activar el sandbox
   - Guardar el nÃºmero de WhatsApp de Twilio (formato: whatsapp:+14155238886)
4. Configurar webhook:
   - En Twilio Console > Messaging > Settings > WhatsApp Sandbox Settings
   - Configurar "WHEN A MESSAGE COMES IN" con la URL de tu API Gateway
   - URL ejemplo: `https://{api-id}.execute-api.{region}.amazonaws.com/{stage}/webhook`

#### 3. Configurar OpenAI
1. Crear una cuenta en OpenAI (https://platform.openai.com)
2. Generar una API Key
3. Verificar que la API Key tenga acceso a:
   - GPT-3.5 Turbo
   - Embeddings API

#### 4. Configurar el Proyecto
1. Clonar el repositorio:
```bash
git clone git@github.com:DanteRangel/ai-agent.git
cd ai-agent
```

2. Crear y activar entorno virtual:
```bash
python -m venv venv
source venv/bin/activate  # En Windows: venv\Scripts\activate
```

3. Instalar dependencias:
```bash
pip install -r requirements.txt
```

4. Crear archivo de variables de entorno:
```bash
cp .env.example .env
# Editar .env con tus credenciales
```

5. Iniciar DynamoDB local:
```bash
docker run -p 8000:8000 amazon/dynamodb-local
```

6. Crear tablas localmente:
```bash
aws dynamodb create-table \
    --table-name ai-agentcatalog-dev \
    --attribute-definitions AttributeName=stockId,AttributeType=S \
    --key-schema AttributeName=stockId,KeyType=HASH \
    --provisioned-throughput ReadCapacityUnits=5,WriteCapacityUnits=5 \
    --endpoint-url http://localhost:8000

aws dynamodb create-table \
    --table-name ai-agentembeddings-dev \
    --attribute-definitions AttributeName=stockId,AttributeType=S \
    --key-schema AttributeName=stockId,KeyType=HASH \
    --provisioned-throughput ReadCapacityUnits=5,WriteCapacityUnits=5 \
    --endpoint-url http://localhost:8000
```

7. Importar catÃ¡logo de prueba:
```bash
python -m app.scripts.import_catalog sample_caso_ai_engineer.csv --table ai-agentcatalog-dev
```

8. Probar localmente:
```bash
sam local start-api
```

#### 5. Despliegue a AWS
1. Construir la aplicaciÃ³n:
```bash
sam build
```

2. Desplegar a desarrollo:
```bash
sam deploy --guided --stack-name ai-agent
```
o si tienes algun problema
```bash
rm -rf .aws-sam/build && sam build --use-container &&  sam deploy --stack-name ai-agent --parameter-overrides $(cat env.json | jq -r '.Parameters | to_entries | map("\(.key)=\(.value)") | join(" ")')  --no-fail-on-empty-changeset --resolve-s3 --resolve-s3 --capabilities CAPABILITY_IAM
```

3. Verificar Step Functions:
   - Ir a AWS Console > Step Functions
   - Verificar que se creÃ³ el flujo:
     - `ai-agent-dev-conversation-flow`

4. Actualizar webhook de Twilio:
   - Copiar la URL de API Gateway del output de SAM
   - Actualizar en Twilio Console > Messaging > Settings > WhatsApp Sandbox Settings
   - Asegurarse que el webhook apunte al endpoint que inicia el flujo de conversaciÃ³n

5. Probar el webhook:
   - Enviar "Hola" al nÃºmero de WhatsApp de Twilio
   - Verificar logs en CloudWatch
   - Verificar el flujo en Step Functions
   - Verificar respuesta en WhatsApp

#### 6. Monitoreo
1. CloudWatch Logs:
   - Revisar logs de las funciones Lambda
   - Configurar alarmas para errores

2. X-Ray:
   - Verificar trazas de las funciones
   - Analizar tiempos de respuesta

3. DynamoDB:
   - Monitorear capacidad de lectura/escritura
   - Verificar tamaÃ±o de las tablas

4. Step Functions:
   - Monitorear ejecuciones de los flujos
   - Revisar mÃ©tricas de Ã©xito/error
   - Configurar alarmas para fallos
   - Verificar tiempos de ejecuciÃ³n

### Estructura del Proyecto
```
ai-agent/
â”œâ”€â”€ template.yaml         # ConfiguraciÃ³n de SAM
â”œâ”€â”€ requirements.txt      # Dependencias de Python (global)
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ requirements.txt  # Dependencias de Python (app)
â”‚   â”œâ”€â”€ core/            # CÃ³digo compartido (servicios, utilidades, etc.)
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ process_message/ (Lambda Chat, guarda prospecto y MSAT)
â”‚   â”‚   â”œâ”€â”€ update_embeddings/ (Lambda Embeddings)
â”‚   â”‚   â”œâ”€â”€ send_response/ (Lambda Webhook (respuesta))
â”‚   â”‚   â”œâ”€â”€ send_error_response/ (Lambda Webhook (error))
â”‚   â”‚   â”œâ”€â”€ validate_webhook/ (Lambda Webhook (validaciÃ³n))
â”‚   â”‚   â””â”€â”€ webhook/ (Lambda Webhook (general))
â”‚   â””â”€â”€ scripts/         # Scripts de utilidad (por ejemplo, import_catalog)
â”œâ”€â”€ docs/ (documentaciÃ³n, imÃ¡genes, etc.)
â”œâ”€â”€ statemachine/ (definiciones de Step Functions)
â”œâ”€â”€ tests/ (pruebas unitarias e integraciÃ³n)
â”œâ”€â”€ venv (entorno virtual (ignorado en .gitignore))
â”œâ”€â”€ .aws-sam (build de SAM (ignorado en .gitignore))
â”œâ”€â”€ node_modules (ignorado en .gitignore)
â”œâ”€â”€ .ruby-lsp (ignorado en .gitignore)
â”œâ”€â”€ .gitignore (archivos ignorados en git)
â”œâ”€â”€ env.json (variables de entorno (ignorado en .gitignore))
â”œâ”€â”€ samconfig.toml (configuraciÃ³n de SAM (ignorado en .gitignore))
â”œâ”€â”€ .aws-sam-ignore (archivos ignorados en el build de SAM)
â”œâ”€â”€ sample_caso_ai_engineer.csv (catÃ¡logo de prueba (ignorado en .gitignore))
â””â”€â”€ pytest.ini (configuraciÃ³n de pytest (ignorado en .gitignore))
```

### Importar CatÃ¡logo

#### 1. Preparar el CSV
El archivo CSV debe tener las siguientes columnas:
- `stockId`: Identificador Ãºnico del auto
- `make`: Marca del auto
- `model`: Modelo del auto
- `version`: VersiÃ³n del auto (opcional)
- `year`: AÃ±o del auto
- `price`: Precio en pesos
- `km`: Kilometraje
- `bluetooth`: "SÃ­" o "No"
- `carPlay`: "SÃ­" o "No"
- `largo`: Largo en mm
- `ancho`: Ancho en mm
- `altura`: Altura en mm

#### 2. Requisitos
```bash
# Instalar dependencias
pip install csvkit  # Para csvjson
pip install jq      # Para procesamiento JSON
```

#### 3. Usar el Script de ImportaciÃ³n
```bash
# Dar permisos de ejecuciÃ³n al script
chmod +x app/scripts/import_catalog.sh

# Importar a desarrollo
./app/scripts/import_catalog.sh catalogo.csv ai-agentcatalog-dev

# Importar a producciÃ³n
./app/scripts/import_catalog.sh catalogo.csv ai-agentcatalog-prod
```

El script:
- Convierte el CSV a JSON usando `csvjson`
- Transforma los tipos de datos automÃ¡ticamente:
  - NÃºmeros a tipo N
  - Booleanos a tipo BOOL
  - Texto a tipo S
- Filtra campos nulos o vacÃ­os
- Importa registro por registro a DynamoDB
- Muestra progreso de importaciÃ³n

#### 4. Verificar la ImportaciÃ³n
```

### Flujos de Step Functions

- **Flujo de ConversaciÃ³n** (ver "Flujos Detallados" para el diagrama detallado).

- **Flujo de ActualizaciÃ³n de Embeddings (Trigger Diario)** (ver "Flujos Detallados" para el diagrama detallado).